<html>
 <head>
   <meta charset="utf-8" />
   <title>Ranking Result</title>
   <link href="styles.css" rel="stylesheet">
 </head>

 <body>
<div class="container">
  <br />
  <div class="row">
    <div class="col-md-1"></div>
    <div class="col-md-10">
<!--       Chart.js Canvas Tag -->
      <canvas id="barChart"></canvas>
    </div>
    <div class="col-md-1"></div>
  </div>
  <button id="back-btn" class="btn">Previous</button>
  <button id="next-btn" class="btn">Next</button>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.bundle.js"></script>
<script>

var canvas = document.getElementById("barChart");
var ctx = canvas.getContext('2d');
const backButton = document.getElementById('back-btn')
const nextButton = document.getElementById('next-btn')
Chart.defaults.global.defaultFontColor = 'black';
Chart.defaults.global.defaultFontSize = 16;
let index=0

function loadFile(filePath) {
  var result = null;
  var xmlhttp = new XMLHttpRequest();
  xmlhttp.open("GET", filePath, false);
  xmlhttp.send();
  if (xmlhttp.status==200) {
    result = xmlhttp.responseText;
  }
  return result;
}

list = loadFile("src_python/ranking_list.txt");
backgroundColors = ['red', 'pink', 'yellow', 'green', 'blue', 'purple', 'gray', 'black', 'white' ,'khaki' ,'lawngreen' , 'lightblue' , 'lightpink'];

console.log(list[index][1])

var data = {
    labels: list[index][0],
      datasets: [
        {
            fill: true,
            backgroundColor: backgroundColors,
            data: list[index][1]
        }
    ]
};

var options = {
        title: {
                  display: true,
                  text: 'What happens when you lend your favorite t-shirt to a girl ?'
              },
        rotation: -0.7 * Math.PI
};

var myBarChart = new Chart(ctx, {
    type: 'pie',
    data: data,
    options: options
});

nextButton.addEventListener('click', () => {

index = index + 1

myBarChart.data.labels = [];
myBarChart.data.datasets[0].data = '';
myBarChart.update();

var data = {
    labels: list[index][0],
    datasets: [
        {
            fill: true,
            backgroundColor: backgroundColors,
            data: list[index][1]
        }
    ]
};

var options = {
        title: {
                  display: true,
                  text: 'Question2'
              },
        rotation: -0.7 * Math.PI
};

myBarChart = new Chart(ctx, {
    type: 'pie',
    data: data,
    options: options
});

})

</script>
</body>
</html>
